<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Reporte Diario - {{ persona.nombre }}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; color: #222; }
        h1 { font-size: 1.5rem; margin-bottom: 0; }
        h2 { font-size: 1.1rem; margin-top: 1.5rem; color: #333; }
        h3 { font-size: 1rem; margin: 1rem 0 0.25rem; color: #444; }
        table { border-collapse: collapse; width: 100%; margin-top: 0.5rem; }
        th, td { border: 1px solid #ccc; padding: 0.5rem; vertical-align: top; font-size: .9rem; }
        th { background: #f4f4f4; }
        p { line-height: 1.4; font-size: .95rem; }
        .small { font-size: .8rem; color: #666; }
        .header { display:flex; justify-content: space-between; align-items:center; margin-bottom: 1.5rem; }
        .tag { background:#007bff; color:#fff; padding:2px 6px; border-radius:4px; font-size:.8rem; margin-left:.3rem;}
        .subtle { color:#444; font-size:.85rem; }
        hr { margin:1.5rem 0; border:none; border-top:1px solid #ddd; }
        .fraccion { margin-bottom:.75rem; }
        .nivel { font-weight:600; text-transform:capitalize; }
        @media print {
            body { margin: 10mm; }
            button { display:none; }
        }
    </style>
</head>
<body>

<div class="header">
    <div>
        <h1>Plan de Limpieza Diario</h1>
        <div class="small">Fecha: {{ fecha.strftime('%d-%m-%Y') }}</div>
        <div class="small">Personal: {{ persona.personal_id }} - {{ persona.nombre }}</div>
    </div>
    <button onclick="window.print()">üñ®Ô∏è Imprimir</button>
</div>

{% for bloque in reporte_data %}
    <h2>√Årea: {{ bloque.area }} ‚Äî Sub√°rea: {{ bloque.subarea }}</h2>
    <div class="subtle">
        Nivel de limpieza asignado: <span class="nivel">{{ bloque.nivel }}</span><br>
        SOP: {{ bloque.sop_codigo }}
    </div>

    <h3>Pasos de limpieza (fracciones):</h3>
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Nombre</th>
                <th>Descripci√≥n</th>
                <th>Frecuencia</th>
                <th>Tiempo (min)</th>
                <th>Nivel</th>
            </tr>
        </thead>
        <tbody>
        {% for f in bloque.fracciones %}
            <tr>
                <td>{{ f.orden }}</td>
                <td>{{ f.fraccion_nombre }}</td>
                <td>{{ f.descripcion }}</td>
                <td>{{ f.frecuencia_programada }}</td>
                <td>{{ f.tiempo_fraccion }}</td>
                <td>{{ f.nivel_limpieza }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <p class="small"><strong>Observaci√≥n cr√≠tica SOP:</strong> {{ bloque.observacion_critica }}</p>
    <hr>
{% endfor %}

<p class="small">
    <em>Fin del reporte.</em>  
    Este documento debe acompa√±ar la bit√°cora de limpieza diaria del personal.
</p>

</body>
</html>
